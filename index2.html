<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>中文常用语 100 句｜点读课件（CSV版）</title>
  <style>
    :root{
      --bg:#0b1220; --card:#0f1a30; --muted:#94a3b8; --text:#e5e7eb;
      --accent:#22c55e; --accent2:#60a5fa; --danger:#fb7185;
      --border:rgba(148,163,184,.18);
      --tap:44px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans Thai","Noto Sans",sans-serif;background:linear-gradient(180deg,#050915 0%,#0b1220 100%);color:var(--text)}
    header{position:sticky;top:0;z-index:50;background:rgba(11,18,32,.85);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .top{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    h1{font-size:18px;margin:0}
    .pill{padding:6px 10px;border:1px solid var(--border);border-radius:999px;color:var(--muted);font-size:12px}

    .grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:14px}
    @media(min-width:900px){.grid{grid-template-columns:380px 1fr}}

    .panel{background:rgba(15,26,48,.7);border:1px solid var(--border);border-radius:14px;overflow:hidden}
    .panel .hd{padding:12px;border-bottom:1px solid var(--border);display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .panel .bd{padding:12px}

    input[type="text"]{width:100%;min-height:40px;padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:#081022;color:var(--text);outline:none}
    input[type="text"]::placeholder{color:#64748b}

    .btn{cursor:pointer;border:1px solid var(--border);background:#0a1327;color:var(--text);padding:10px 12px;border-radius:12px;font-weight:700;font-size:13px;min-height:40px}
    .btn:hover{border-color:rgba(148,163,184,.4)}
    .btn.primary{background:linear-gradient(90deg,#16a34a,#22c55e);border:none;color:#04110a}
    .btn.secondary{background:linear-gradient(90deg,#2563eb,#60a5fa);border:none;color:#071225}
    .btn.danger{background:linear-gradient(90deg,#e11d48,#fb7185);border:none;color:#18040a}

    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .row > *{flex:1}
    .row .tight{flex:0 0 auto}

    .list{max-height:62vh;overflow:auto}
    .item{padding:10px 12px;border-bottom:1px solid var(--border);cursor:pointer;display:flex;gap:10px;align-items:flex-start}
    .item:hover{background:rgba(96,165,250,.08)}
    .item.active{background:rgba(34,197,94,.12)}
    .idx{color:var(--muted);font-variant-numeric:tabular-nums;min-width:38px}
    .th{font-size:15px;line-height:1.4}
    .zh{font-size:14px;color:#c7d2fe;margin-top:3px}

    .card{padding:14px;border-radius:14px;background:rgba(15,26,48,.7);border:1px solid var(--border)}
    .bigTH{font-size:22px;font-weight:900;letter-spacing:.2px}
    .bigZH{margin-top:10px;font-size:20px;font-weight:900}
    .bigPY{margin-top:6px;color:var(--accent2);font-size:15px}
    .meta{margin-top:10px;color:var(--muted);font-size:12px;display:flex;gap:10px;flex-wrap:wrap}

    .progress{height:10px;background:#071022;border-radius:999px;border:1px solid var(--border);overflow:hidden}
    .bar{height:100%;background:linear-gradient(90deg,#16a34a,#22c55e);width:0%}

    .toggle{display:flex;gap:10px;align-items:center;color:var(--muted);font-size:12px}
    .toggle input{transform:scale(1.1)}

    .note{color:var(--muted);font-size:12px;line-height:1.55}
    code{background:#071022;padding:2px 6px;border-radius:8px;border:1px solid var(--border)}
    .warn{color:#fbbf24}

    .badge{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid var(--border);background:rgba(8,16,34,.6);color:var(--muted);font-size:12px}

    /* MCQ */
    .choices{display:flex;flex-direction:column;gap:10px}
    .choiceBtn{width:100%;text-align:left;min-height:44px;white-space:normal;line-height:1.25}

    /* Mobile tabs */
    .mobile-nav{
      display:none;
      position:fixed;left:0;right:0;bottom:0;
      padding:10px 12px calc(10px + env(safe-area-inset-bottom));
      background:rgba(11,18,32,.92);
      backdrop-filter:blur(10px);
      border-top:1px solid var(--border);
      z-index:60;
      gap:10px;
    }
    .seg{flex:1;display:flex;gap:8px}
    .seg button{flex:1;min-height:44px}
    .seg .active{background:linear-gradient(90deg,#2563eb,#60a5fa);border:none;color:#071225}

    @media(max-width:699px){
      .wrap{padding:12px}
      header .wrap{padding:10px 12px}
      h1{font-size:16px;line-height:1.2}
      .pill{font-size:11px}

      .grid{gap:10px}
      .panel{border-radius:16px}
      .panel .hd{padding:10px;gap:8px}
      .panel .bd{padding:10px}

      .btn{min-height:var(--tap);border-radius:14px}
      input[type="text"]{min-height:var(--tap);border-radius:14px}

      main.wrap{padding-bottom:calc(84px + env(safe-area-inset-bottom))}
      .list{max-height:none;height:calc(100dvh - 260px);border-radius:14px}
      #cardPanel .bd{max-height:calc(100dvh - 220px);overflow:auto;-webkit-overflow-scrolling:touch}

      .row{gap:8px}
      .row > *{flex:1 1 48%}
      .row .tight{flex:1 1 auto}

      .mobile-nav{display:flex}
    }

    @media(min-width:700px) and (max-width:1024px){
      .grid{grid-template-columns:360px 1fr}
      .list{max-height:70vh}
    }
  </style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="top">
      <h1>
        中文常用语 100 句｜点读课件（CSV版）
        <br><span style="font-size:13px;color:#94a3b8">บทเรียนภาษาจีน 100 ประโยค (คลิกเพื่อฟังเสียง)</span>
      </h1>
      <span class="pill">普通：点列表播中文｜测验：题目=泰语+泰语音频；答案=中文+拼音（四选一）</span>
      <span class="pill" id="status">未加载</span>
      <span class="pill" id="csvWhere">CSV：/lesson100/phrases.csv</span>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="grid">

    <!-- List panel -->
    <section class="panel" id="listPanel">
      <div class="hd">
        <input id="q" type="text" placeholder="搜索：泰语 / 中文 / 拼音 / key …" />
        <button class="btn tight" id="clear">清空</button>
      </div>

      <div class="bd">
        <div class="row" style="margin-bottom:10px">
          <button class="btn" id="quiz">🎧 听音问答<br>แบบทดสอบฟังเสียง</button>
          <button class="btn secondary" id="shuffle">随机</button>
          <button class="btn" id="prev">上一条</button>
          <button class="btn" id="next">下一条</button>
        </div>

        <div class="progress" title="学习进度（已标记熟悉）"><div class="bar" id="bar"></div></div>

        <div class="meta" style="margin:10px 0 0">
          <span id="count">0 条</span>
          <span id="knownCount">已熟悉 0</span>
          <span class="toggle"><input type="checkbox" id="auto"> 自动下一条</span>
          <span class="toggle"><input type="checkbox" id="loop"> 循环播放</span>
          <span class="badge" id="mode">普通模式</span>
        </div>
      </div>

      <div class="list" id="list"></div>
    </section>

    <!-- Card panel -->
    <section class="panel" id="cardPanel">
      <div class="hd">
        <button class="btn primary" id="playTh">▶ 播放泰语<br>เล่นภาษาไทย</button>
        <button class="btn" id="replay">⟲ 重播</button>
        <button class="btn secondary" id="showAns">👁 显示答案<br>ดูคำตอบ</button>
        <button class="btn secondary" id="mcqMode">🅰🅱 选择题<br>ตัวเลือก</button>
        <button class="btn" id="playZh">▶ 播放中文<br>เล่นภาษาจีน</button>
        <button class="btn" id="prevQ">◀ 上一题<br>ก่อนหน้า</button>
        <button class="btn" id="nextQ">下一题 ▶<br>ถัดไป</button>
        <button class="btn" id="mark">✓ 标记熟悉</button>
        <button class="btn danger" id="reset">重置熟悉</button>
      </div>

      <div class="bd">
        <div class="card">
          <div class="bigTH" id="bigTH">—</div>
          <div class="bigZH" id="bigZH">—</div>
          <div class="bigPY" id="bigPY">—</div>
          <div class="meta">
            <span>音频 key：<code id="key">—</code></span>
            <span>文件：<code id="file">—</code></span>
            <span>错题：<code id="wrongStat">0题/0次</code></span>
          </div>
        </div>

        <div style="height:12px"></div>

        <div class="card" id="mcq" style="display:none">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
            <div style="font-weight:900">选择题（四选一）<span style="font-weight:700;color:#94a3b8">｜คำถามแบบเลือกตอบ</span></div>
            <div class="row" style="margin:0">
              <button class="btn tight" id="wrongOnlyBtn">只练错题：关</button>
              <button class="btn danger tight" id="clearWrong">清空错题</button>
            </div>
          </div>
          <div style="height:10px"></div>
          <div id="choices" class="choices"></div>
          <div style="height:10px"></div>
          <div class="note" id="mcqHint">点击选项作答。答完会显示正误；可点“播放中文”听正确答案。</div>
        </div>

        <div style="height:12px"></div>

        <div class="note">
          <b>文件结构（同一文件夹）</b><br>
          <code>index2.html</code>（本文件）<br>
          <code>phrases.csv</code>（3列：Thai,Chinese_Pinyin,TTS_Key）<br>
          <code>audio/</code>（中文音频）<code>&lt;key&gt;.mp3</code>（例 <code>audio/zh_cn_0001.mp3</code>）<br>
          <code>audio_th/</code>（泰语音频）<code>th_0001.mp3</code>（例 <code>audio_th/th_0001.mp3</code>）<br>
          <br>
          <span class="warn"><b>提示：</b></span>CSV 固定从 <code>/lesson100/phrases.csv</code> 加载；请用 GitHub Pages 打开（不要 file:// / Drive 预览）。
        </div>
      </div>
    </section>

  </div>

  <div class="mobile-nav" id="mobileNav">
    <div class="seg">
      <button class="btn" id="tabList">📋 列表<br>รายการ</button>
      <button class="btn active" id="tabPractice">🎧 练习<br>ฝึก</button>
    </div>
  </div>
</main>

<audio id="audio" preload="auto"></audio>

<script>
// ...其余内容如上...
</script>
</body>
</html>